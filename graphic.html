<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxury Shooting Stars</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #0a0a0a;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        .container {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
        }
        
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .title {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(245, 245, 240, 0.9);
            font-size: clamp(3rem, 6vw, 6rem);
            font-weight: 200;
            letter-spacing: 0.5em;
            text-transform: uppercase;
            pointer-events: none;
            text-align: center;
            text-shadow: 
                0 0 20px rgba(232, 220, 202, 0.5),
                0 0 40px rgba(163, 181, 181, 0.3);
            animation: titleGlow 8s ease-in-out infinite;
            mix-blend-mode: screen;
        }
        
        @keyframes titleGlow {
            0%, 100% { 
                opacity: 0.8;
                filter: blur(0.5px);
            }
            50% { 
                opacity: 1;
                filter: blur(1px) brightness(1.2);
            }
        }
        
        .subtitle {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(212, 196, 184, 0.6);
            font-size: clamp(0.8rem, 1.5vw, 1.2rem);
            font-weight: 300;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            pointer-events: none;
            text-align: center;
        }
        
        .controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(181, 184, 163, 0.5);
            font-size: 11px;
            text-align: center;
            letter-spacing: 0.2em;
        }
        
        .star-count {
            position: absolute;
            top: 30px;
            right: 30px;
            color: rgba(163, 181, 181, 0.7);
            font-size: 12px;
            font-family: monospace;
            letter-spacing: 0.1em;
        }
        
        .interaction-hint {
            position: absolute;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(232, 220, 202, 0.4);
            font-size: 11px;
            text-align: center;
            animation: pulseHint 2s ease-in-out infinite;
        }
        
        @keyframes pulseHint {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }
    </style>
</head>
<body>
    <div class="container">
        <canvas id="starCanvas"></canvas>
        <div class="title">STELLAR</div>
        <div class="subtitle">COSMIC JOURNEY</div>
        <div class="star-count" id="starCounter">STARS: 0</div>
        <div class="interaction-hint">CLICK & DRAG - CREATE STAR TRAILS</div>
        <div class="controls">LUXURY SHOOTING STARS ANIMATION</div>
    </div>

    <script>
        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');
        const starCounter = document.getElementById('starCounter');
        
        // Люксовые цвета для звезд и следов
        const luxuryPalette = [
            { color: [232, 220, 202], name: 'SAND' },    // E8DCCA
            { color: [212, 196, 184], name: 'STONE' },   // D4C4B8
            { color: [181, 184, 163], name: 'OLIVE' },   // B5B8A3
            { color: [163, 181, 181], name: 'AQUA' },    // A3B5B5
            { color: [245, 245, 240], name: 'PEARL' }    // F5F5F0
        ];
        
        // Звезды и следы
        let stars = [];
        let trails = [];
        let particles = [];
        let constellations = [];
        let time = 0;
        let mouse = { x: -1000, y: -1000, down: false };
        let lastMouse = { x: -1000, y: -1000 };
        
        // Инициализация
        function init() {
            resizeCanvas();
            createBackgroundStars(150);
            createConstellations();
            
            // Слушатели событий
            window.addEventListener('resize', resizeCanvas);
            canvas.addEventListener('mousemove', handleMouseMove);
            canvas.addEventListener('mousedown', () => mouse.down = true);
            canvas.addEventListener('mouseup', () => mouse.down = false);
            canvas.addEventListener('click', createStarBurst);
            
            // Запуск анимации
            animate();
        }
        
        // Изменение размера canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        // Создание фоновых звезд
        function createBackgroundStars(count) {
            for (let i = 0; i < count; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 1.5 + 0.5,
                    speed: Math.random() * 0.5 + 0.1,
                    color: luxuryPalette[Math.floor(Math.random() * luxuryPalette.length)].color,
                    twinkleSpeed: Math.random() * 0.05 + 0.02,
                    twinkleOffset: Math.random() * Math.PI * 2,
                    type: 'background'
                });
            }
        }
        
        // Создание созвездий
        function createConstellations() {
            const constellationCount = 5;
            for (let i = 0; i < constellationCount; i++) {
                const points = [];
                const pointCount = Math.floor(Math.random() * 6) + 4;
                const centerX = Math.random() * canvas.width;
                const centerY = Math.random() * canvas.height;
                const radius = Math.random() * 100 + 50;
                
                for (let j = 0; j < pointCount; j++) {
                    const angle = (j / pointCount) * Math.PI * 2;
                    points.push({
                        x: centerX + Math.cos(angle) * radius * (0.5 + Math.random() * 0.5),
                        y: centerY + Math.sin(angle) * radius * (0.5 + Math.random() * 0.5),
                        size: Math.random() * 2 + 1
                    });
                }
                
                constellations.push({
                    points: points,
                    color: luxuryPalette[Math.floor(Math.random() * luxuryPalette.length)].color,
                    rotation: Math.random() * Math.PI * 2,
                    rotationSpeed: (Math.random() - 0.5) * 0.002
                });
            }
        }
        
        // Создание новой падающей звезды
        function createShootingStar() {
            const palette = luxuryPalette[Math.floor(Math.random() * luxuryPalette.length)];
            
            // Начальная позиция (чаще из верхней части экрана)
            const startX = Math.random() * canvas.width;
            const startY = Math.random() * canvas.height * 0.2;
            
            // Направление и скорость
            const angle = Math.random() * Math.PI * 0.5 - Math.PI * 0.25; // Диагональные траектории
            const speed = Math.random() * 15 + 8; // Быстрые звезды
            const length = Math.random() * 80 + 40;
            
            stars.push({
                x: startX,
                y: startY,
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed,
                size: Math.random() * 3 + 2,
                color: palette.color,
                trail: [],
                maxTrailLength: length,
                life: 1.0,
                decay: 0.02 + Math.random() * 0.02,
                rotation: angle,
                sparkleIntensity: Math.random() * 0.5 + 0.5
            });
            
            updateStarCounter();
        }
        
        // Создание звездного взрыва по клику
        function createStarBurst(e) {
            const burstCount = 15;
            for (let i = 0; i < burstCount; i++) {
                const palette = luxuryPalette[Math.floor(Math.random() * luxuryPalette.length)];
                
                stars.push({
                    x: e.clientX,
                    y: e.clientY,
                    vx: (Math.random() - 0.5) * 20,
                    vy: (Math.random() - 0.5) * 20,
                    size: Math.random() * 4 + 1,
                    color: palette.color,
                    trail: [],
                    maxTrailLength: 30,
                    life: 1.0,
                    decay: 0.03 + Math.random() * 0.02,
                    rotation: Math.random() * Math.PI * 2,
                    sparkleIntensity: 1.0
                });
            }
            updateStarCounter();
        }
        
        // Обработка движения мыши
        function handleMouseMove(e) {
            lastMouse.x = mouse.x;
            lastMouse.y = mouse.y;
            mouse.x = e.clientX;
            mouse.y = e.clientY;
            
            // Создание следов при зажатой кнопке
            if (mouse.down) {
                const dx = mouse.x - lastMouse.x;
                const dy = mouse.y - lastMouse.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance > 5) {
                    trails.push({
                        x: mouse.x,
                        y: mouse.y,
                        size: Math.random() * 3 + 1,
                        color: luxuryPalette[Math.floor(Math.random() * luxuryPalette.length)].color,
                        life: 1.0,
                        decay: 0.02
                    });
                }
            }
        }
        
        // Обновление счетчика звезд
        function updateStarCounter() {
            starCounter.textContent = `STARS: ${stars.length}`;
        }
        
        // Отрисовка глубокого космоса
        function drawDeepSpace() {
            // Градиентный фон
            const spaceGradient = ctx.createRadialGradient(
                canvas.width * 0.5, canvas.height * 0.3, 0,
                canvas.width * 0.5, canvas.height * 0.5, Math.max(canvas.width, canvas.height) * 0.8
            );
            
            spaceGradient.addColorStop(0, 'rgba(10, 10, 10, 0.8)');
            spaceGradient.addColorStop(0.5, 'rgba(26, 26, 46, 0.6)');
            spaceGradient.addColorStop(1, 'rgba(22, 33, 62, 0.8)');
            
            ctx.fillStyle = spaceGradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Туманность
            for (let i = 0; i < 4; i++) {
                const x = canvas.width * 0.3 + Math.sin(time * 0.001 + i) * 100;
                const y = canvas.height * 0.2 + Math.cos(time * 0.001 + i * 0.5) * 50;
                const radius = 200 + Math.sin(time * 0.002 + i) * 50;
                
                const nebula = ctx.createRadialGradient(x, y, 0, x, y, radius);
                const color = luxuryPalette[i].color;
                nebula.addColorStop(0, `rgba(${color[0]}, ${color[1]}, ${color[2]}, 0.1)`);
                nebula.addColorStop(1, `rgba(${color[0]}, ${color[1]}, ${color[2]}, 0)`);
                
                ctx.fillStyle = nebula;
                ctx.beginPath();
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // Отрисовка созвездий
        function drawConstellations() {
            constellations.forEach(constellation => {
                constellation.rotation += constellation.rotationSpeed;
                
                // Точки созвездия
                constellation.points.forEach(point => {
                    const rotatedX = Math.cos(constellation.rotation) * (point.x - canvas.width/2) - 
                                   Math.sin(constellation.rotation) * (point.y - canvas.height/2) + 
                                   canvas.width/2;
                    const rotatedY = Math.sin(constellation.rotation) * (point.x - canvas.width/2) + 
                                   Math.cos(constellation.rotation) * (point.y - canvas.height/2) + 
                                   canvas.height/2;
                    
                    const twinkle = Math.sin(time * 0.003 + point.x * 0.01) * 0.3 + 0.7;
                    
                    ctx.beginPath();
                    ctx.arc(rotatedX, rotatedY, point.size * twinkle, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(${constellation.color[0]}, ${constellation.color[1]}, ${constellation.color[2]}, 0.4)`;
                    ctx.fill();
                    
                    // Свечение
                    const glow = ctx.createRadialGradient(
                        rotatedX, rotatedY, 0,
                        rotatedX, rotatedY, point.size * 4
                    );
                    glow.addColorStop(0, `rgba(${constellation.color[0]}, ${constellation.color[1]}, ${constellation.color[2]}, 0.3)`);
                    glow.addColorStop(1, `rgba(${constellation.color[0]}, ${constellation.color[1]}, ${constellation.color[2]}, 0)`);
                    
                    ctx.fillStyle = glow;
                    ctx.beginPath();
                    ctx.arc(rotatedX, rotatedY, point.size * 4, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                // Линии между точками
                ctx.strokeStyle = `rgba(${constellation.color[0]}, ${constellation.color[1]}, ${constellation.color[2]}, 0.15)`;
                ctx.lineWidth = 0.5;
                ctx.beginPath();
                
                for (let i = 0; i < constellation.points.length; i++) {
                    const p1 = constellation.points[i];
                    const p2 = constellation.points[(i + 1) % constellation.points.length];
                    
                    const x1 = Math.cos(constellation.rotation) * (p1.x - canvas.width/2) - 
                              Math.sin(constellation.rotation) * (p1.y - canvas.height/2) + 
                              canvas.width/2;
                    const y1 = Math.sin(constellation.rotation) * (p1.x - canvas.width/2) + 
                              Math.cos(constellation.rotation) * (p1.y - canvas.height/2) + 
                              canvas.height/2;
                    const x2 = Math.cos(constellation.rotation) * (p2.x - canvas.width/2) - 
                              Math.sin(constellation.rotation) * (p2.y - canvas.height/2) + 
                              canvas.width/2;
                    const y2 = Math.sin(constellation.rotation) * (p2.x - canvas.width/2) + 
                              Math.cos(constellation.rotation) * (p2.y - canvas.height/2) + 
                              canvas.height/2;
                    
                    ctx.moveTo(x1, y1);
                    ctx.lineTo(x2, y2);
                }
                ctx.stroke();
            });
        }
        
        // Отрисовка фоновых звезд
        function drawBackgroundStars() {
            particles.forEach(particle => {
                if (particle.type === 'background') {
                    const twinkle = Math.sin(time * particle.twinkleSpeed + particle.twinkleOffset) * 0.5 + 0.5;
                    
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.size * twinkle, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(${particle.color[0]}, ${particle.color[1]}, ${particle.color[2]}, 0.8 * ${twinkle})`;
                    ctx.fill();
                    
                    // Медленное движение
                    particle.x += Math.sin(time * 0.001 + particle.y * 0.01) * 0.1;
                    particle.y += particle.speed * 0.1;
                    
                    if (particle.y > canvas.height) {
                        particle.y = 0;
                        particle.x = Math.random() * canvas.width;
                    }
                }
            });
        }
        
        // Отрисовка падающих звезд
        function drawShootingStars() {
            // Обновление и отрисовка звезд
            for (let i = stars.length - 1; i >= 0; i--) {
                const star = stars[i];
                
                // Добавление точки в след
                star.trail.push({ x: star.x, y: star.y });
                if (star.trail.length > star.maxTrailLength) {
                    star.trail.shift();
                }
                
                // Движение
                star.x += star.vx;
                star.y += star.vy;
                
                // Затухание
                star.life -= star.decay;
                
                // Вращение для эффекта полета
                star.rotation += 0.1;
                
                // Отрисовка следа
                if (star.trail.length > 1) {
                    ctx.lineWidth = star.size * 0.5;
                    
                    for (let j = 0; j < star.trail.length - 1; j++) {
                        const alpha = (j / star.trail.length) * star.life * 0.7;
                        
                        // Градиент по длине следа
                        const gradient = ctx.createLinearGradient(
                            star.trail[j].x, star.trail[j].y,
                            star.trail[j + 1].x, star.trail[j + 1].y
                        );
                        
                        gradient.addColorStop(0, `rgba(${star.color[0]}, ${star.color[1]}, ${star.color[2]}, ${alpha})`);
                        gradient.addColorStop(1, `rgba(${star.color[0]}, ${star.color[1]}, ${star.color[2]}, ${alpha * 0.3})`);
                        
                        ctx.strokeStyle = gradient;
                        ctx.lineWidth = star.size * (1 - j / star.trail.length) * 0.7;
                        
                        ctx.beginPath();
                        ctx.moveTo(star.trail[j].x, star.trail[j].y);
                        ctx.lineTo(star.trail[j + 1].x, star.trail[j + 1].y);
                        ctx.stroke();
                    }
                }
                
                // Отрисовка головы звезды
                const sparkle = Math.sin(time * 0.1) * 0.3 + 0.7;
                const headSize = star.size * (1 + Math.sin(time * 0.2) * 0.5) * star.life;
                
                // Основное свечение
                const headGradient = ctx.createRadialGradient(
                    star.x, star.y, 0,
                    star.x, star.y, headSize * 3
                );
                headGradient.addColorStop(0, `rgba(255, 255, 255, ${star.life * star.sparkleIntensity})`);
                headGradient.addColorStop(0.3, `rgba(${star.color[0]}, ${star.color[1]}, ${star.color[2]}, ${star.life * 0.8})`);
                headGradient.addColorStop(1, `rgba(${star.color[0]}, ${star.color[1]}, ${star.color[2]}, 0)`);
                
                ctx.fillStyle = headGradient;
                ctx.beginPath();
                ctx.arc(star.x, star.y, headSize * 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Яркое ядро
                ctx.beginPath();
                ctx.arc(star.x, star.y, headSize, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${star.life})`;
                ctx.fill();
                
                // Удаление "мертвых" звезд
                if (star.life <= 0 || 
                    star.x < -100 || star.x > canvas.width + 100 || 
                    star.y < -100 || star.y > canvas.height + 100) {
                    stars.splice(i, 1);
                    updateStarCounter();
                }
            }
        }
        
        // Отрисовка следов от мыши
        function drawMouseTrails() {
            for (let i = trails.length - 1; i >= 0; i--) {
                const trail = trails[i];
                
                ctx.beginPath();
                ctx.arc(trail.x, trail.y, trail.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(${trail.color[0]}, ${trail.color[1]}, ${trail.color[2]}, ${trail.life})`;
                ctx.fill();
                
                // Свечение
                const glow = ctx.createRadialGradient(
                    trail.x, trail.y, 0,
                    trail.x, trail.y, trail.size * 3
                );
                glow.addColorStop(0, `rgba(${trail.color[0]}, ${trail.color[1]}, ${trail.color[2]}, ${trail.life * 0.5})`);
                glow.addColorStop(1, `rgba(${trail.color[0]}, ${trail.color[1]}, ${trail.color[2]}, 0)`);
                
                ctx.fillStyle = glow;
                ctx.beginPath();
                ctx.arc(trail.x, trail.y, trail.size * 3, 0, Math.PI * 2);
                ctx.fill();
                
                trail.life -= trail.decay;
                if (trail.life <= 0) {
                    trails.splice(i, 1);
                }
            }
        }
        
        // Отрисовка частиц звездной пыли
        function drawStardust() {
            // Создание новой звездной пыли
            if (Math.random() < 0.3) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: 0,
                    size: Math.random() * 2 + 0.5,
                    speed: Math.random() * 2 + 1,
                    color: luxuryPalette[Math.floor(Math.random() * luxuryPalette.length)].color,
                    type: 'stardust'
                });
            }
            
            // Отрисовка и обновление частиц
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                
                if (p.type === 'stardust') {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(${p.color[0]}, ${p.color[1]}, ${p.color[2]}, 0.3)`;
                    ctx.fill();
                    
                    p.y += p.speed;
                    p.x += Math.sin(time * 0.01 + p.y * 0.01) * 0.5;
                    
                    if (p.y > canvas.height) {
                        particles.splice(i, 1);
                    }
                }
            }
        }
        
        // Основная функция анимации
        function animate() {
            // Очистка canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Отрисовка всех слоев
            drawDeepSpace();
            drawConstellations();
            drawBackgroundStars();
            drawStardust();
            drawShootingStars();
            drawMouseTrails();
            
            // Случайное создание новых падающих звезд
            if (Math.random() < 0.05) { // 5% шанс каждый кадр
                createShootingStar();
            }
            
            // Обновление времени
            time += 1;
            
            // Следующий кадр
            requestAnimationFrame(animate);
        }
        
        // Запуск
        init();
    </script>
</body>
</html>